---
title: "Dynamic Reports"
author: "The R Bootcamp<br/>Twitter: <a href='https://twitter.com/therbootcamp'>@therbootcamp</a>"
date: "September 2017"
output:
  xaringan::moon_reader:
    css: ["default", "my-theme.css"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: '16:9'
---


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
# see: https://github.com/yihui/xaringan
# install.packages("xaringan")
# see: 
# https://github.com/yihui/xaringan/wiki
# https://github.com/gnab/remark/wiki/Markdown
options(width=110)
options(digits = 4)
```

```{r, echo = FALSE}
knitr::opts_chunk$set(comment=NA, fig.width=6, fig.height=6, echo = TRUE, eval = TRUE, message = FALSE, warning = FALSE, fig.align = 'center')
```

## Dynamic Reports



---
## What is a dynamic report?

.pull-left3[

A dynamic report is a document that contains key elements which are automatically generated by code:

- Data
- R Code
- R outputs
   - Plots, statistics
- Text
- Formatting


]


.pull-right3[

### Example: 

<iframe src="http://rpubs.com/YaRrr/MLTutorial" width="800" height="1000"></iframe>

]


---
## Why are dynamic reports important?

.pull-left3[

### 1. Efficiency


### 2. Reproducibility


### 3. Scaleability

]


.pull-right3[


```{r, echo = FALSE, out.width="100%", fig.align = 'center'}
knitr::include_graphics("images/reproducibility_images.png")
```


]


---
## What are the benefits of dynamic reports?

.pull-left3[

- Data, code, analyses, and plots are all interconnected.

- The code *must* be correct because it is being run as the report is created.

- Anyone, even your future self, can replicate your analyses.

- If something changes in the data, the changes are automatically reflected in the results.

- If you get new data, you can easily create new analyses.

]


.pull-right3[


<iframe src="http://rpubs.com/YaRrr/MLTutorial" width="800" height="1000"></iframe>

]


---
## What dynamic reports can I make in RStudio?

.pull-left3[

- Web (HTML) pages
   - Websites, blog posts, single documents to share
- PDF documents
- Slideshows (like this one)
- Shiny Apps
- Books
- R Packages


]


.pull-right3[

```{r, echo = FALSE, out.width="100%", fig.align = 'center'}
knitr::include_graphics("images/RMarkdownOutputFormats.png")
```


]


---
## What is Markdown?

- To create most dynamic documents in R, we wil make use of **Markdown**

- Markdown is a *markup language* that allows you to easily write text with special formatting *tags*, which are then converted to formatted outputs.

```{r, echo = FALSE, out.width="60%", fig.align = 'center'}
knitr::include_graphics("images/markdown_ss.png")
```



---
## Cheatsheet

```{r, echo = FALSE, out.width="55%", fig.align = 'center'}
knitr::include_graphics("images/markdown_cheat.png")
```

Source: https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf

---
## How do I write an R Markdown Document

```{r, echo = FALSE, out.width="80%", fig.align = 'center'}
knitr::include_graphics("images/openmarkdown.png")
```

---
## RMarkdown= Markdown + R code

```{r, echo = FALSE, out.width="70%", fig.align = 'center'}
knitr::include_graphics("images/rmarkdown_ss2.png")
```


---
## RMarkdown= Markdown + R code

```{r, echo = FALSE, out.width="70%", fig.align = 'center'}
knitr::include_graphics("images/knitto.png")
```


---
## R Markdown Applications

http://rmarkdown.rstudio.com/gallery.html

<iframe src="http://rmarkdown.rstudio.com/gallery.html" width="800" height="800"></iframe>





---
## R Chunks in R Markdown

```{r, echo = FALSE, out.width="60%", fig.align = 'center'}
knitr::include_graphics("images/chunkoptions.png")
```



---
## Key points in R Markdown

.pull-left3[

<br>
<br>

1. You can easily read in external files like images, R code, or datasets. 

2. All external files should be in a folder in the "Root" Directory containing the Markdown (.Rmd) file

3. All data necessary for your report *must* be explicity read into the document. So keep them close by!

]

.pull-right3[

#### Here is the "Root" directory of the R Markdown file `dynamicreports.Rmd` that created *this* presentation

```{r, echo = FALSE, out.width="100%", fig.align = 'center'}
knitr::include_graphics("images/rmarkdown_directory.png")
```


]


---
## Key points in R Markdown

.pull-left3[

<br>
<br>

1. When you "Knit" an R markdown document, it will start with an *empty* workspace (ie. it will forget everything!)

2. You must explicity load all packags with `library()` and load in external datasets (e.g.; `clinical_data <- read_csv("data/data.csv")`)

3. If you have any typos, errors, or missing code, the document will *not* knit.

]

.pull-right3[

#### Well formatted R Markdown document

```{r, echo = FALSE, out.width="100%", fig.align = 'center'}
knitr::include_graphics("images/wellformattedmarkdown.png")
```


]


---
## Why are RMarkdown documents so great?

.pull-left3[

<br>
<br>

1. The data, code, and output are all in the same place.

2. Everything works and is replicable! (If it wasn't, the document wouldn't *Knit*!)

3. You can produce great looking documents, from simple PDFs, to webpages, to presentations (like this one), to books.

```{r, echo = FALSE, out.width="50%", fig.align = 'center'}
knitr::include_graphics("images/markdown_example.png")
```


]

.pull-right3[

```{r, echo = FALSE, out.width="100%", fig.align = 'center'}
knitr::include_graphics("images/markdown_complete.png")
```

]
---
## Practical

- Goal: Create a basic, dynamic report that returns an HTML document






